@model WFJ.Models.DashboardViewModel
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";

    int userType = Convert.ToInt32(Session["UserType"]);
}
<div>
    <main>
        <div>
            <label for="ddlClient">Filter:</label>
            @Html.DropDownList("ddlLocalCounselState", new SelectList(Model.DashbaordFilter, "Value", "Text",Model.FormId), new { @Class = "form-control houseCounselOther" })
        </div>
        <div class="container-fluid site-width">
            @{
                <h2>WFJ Client</h2>
                @Html.Partial("_clientDashboard", Model.ClientDashboard)
            }
            @{
                <h2>WFJ Users</h2>
                @Html.Partial("_userDashboard", Model.UserDashboard)
            }

            @{
                <h2>WFJ Admin</h2>
                @Html.Partial("_adminDashboard", Model.AdminDashboard)
            }

        </div>
    </main>
</div>
@section scripts{
    <script>
        $(document).ready(function () {
            $("#ddlLocalCounselState").change(function () {
                var formId = $(this).val();
                alert(formId);
                window.location.href = "/Dashboard/Index?formId=" + formId;
            });
            
        });
        $("#recently-open-account").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "paging": true,
            "bSortClasses": false,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        $("#recently-open-client").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "paging": true,
            "bSortClasses": false,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        $("#action-required").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "bSortClasses": false,
            "paging": true,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        $("#final-demand-required").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "bSortClasses": false,
            "paging": true,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        $("#approved-payment").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "bSortClasses": false,
            "paging": true,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });
    </script>
    }