@model WFJ.Models.DashboardViewModel
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";

    int userType = Convert.ToInt32(Session["UserType"]);
    bool showClientView = Convert.ToBoolean(Session["ShowClientView"]);
}
<div>
    <main>
        <div>
            <br/>
            <br/>
            <div class="row">
                <div class="col-md-4 col-xl-3 pull-right">
                    <label for="ddlClient" class="pull-right" style="font-size:18px">Form Type:</label>
                </div>
                <div class="col-md-8 col-xl-9">
                    @Html.DropDownList("ddlLocalCounselState", new SelectList(Model.DashbaordFilter, "Value", "Text", Model.FormId), new { @Class = "form-control houseCounselOther" ,@style="width:500px"})
                </div>
            </div>
        </div>
        <div class="container-fluid site-width">
            
                @if (showClientView || (userType == (int)WFJ.Service.Model.UserType.ClientAdministrator || userType == (int)WFJ.Service.Model.UserType.ClientManager || userType == (int)WFJ.Service.Model.UserType.ClientUser))
                {
                @Html.Partial("_clientDashboard", Model.ClientDashboard)
                }

                @if (userType == (int)WFJ.Service.Model.UserType.WFJUser)
                {
                @Html.Partial("_userDashboard", Model.UserDashboard)
                }

                @if (userType == (int)WFJ.Service.Model.UserType.SystemAdministrator)
                {
                @Html.Partial("_adminDashboard", Model.AdminDashboard)
                }

        </div>
    </main>
</div>
@section scripts{
    <script>
        $(document).ready(function () {
            $("#ddlLocalCounselState").change(function () {
                var formId = $(this).val();
                window.location.href = "/Dashboard/Index?formId=" + formId;
            });

        });

        function ShowClientView() {
           var formId = $("#ddlLocalCounselState").val()
            if ($('input[name="showClientView"]:checked')) {
                @{
                    Session["ShowClientView"] = true;
                }

                window.location.href = "/Dashboard/Index?formId=" + formId;

            }
            else {
                 @*@{
                    Session["ShowClientView"] = false;
                }*@
                alert($("#ddlLocalCounselState").val());
            }

            //window.location.href = "/Dashboard/Index?formId=" + formId;
        }

        $("#recently-open-account").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "paging": true,
            "bSortClasses": false,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        $("#recently-open-client").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "paging": true,
            "bSortClasses": false,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        $("#action-required").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "bSortClasses": false,
            "paging": true,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        $("#final-demand-required").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "bSortClasses": false,
            "paging": true,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        $("#approved-payment").dataTable({
            "sScrollY": 500,
            "bScrollCollapse": true,
            "bPaginate": true,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "bSortClasses": false,
            "paging": true,
            drawCallback: function () {
                var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
                pagination.toggle(this.api().page.info().pages > 1);
                var rowCount = this.fnSettings().fnRecordsDisplay();
                if (rowCount <= 10 || isNaN(rowCount)) {
                    $('.dataTables_length').hide();
                }
            }
        });

        // Redirect to the placement page on the basis of formId and requestId
        function redirectToPlacement(formId, requestId) {
            window.location.href = "/Placements/AddPlacement?formId=" + formId + "&requestId=" + requestId;
        }

    </script>
    }

<style>
    .switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
    }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        -webkit-transition: .4s;
        transition: .4s;
    }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

    input:checked + .slider {
        background-color: #2196F3;
    }

    input:focus + .slider {
        box-shadow: 0 0 1px #2196F3;
    }

    input:checked + .slider:before {
        -webkit-transform: translateX(26px);
        -ms-transform: translateX(26px);
        transform: translateX(26px);
    }

    /* Rounded sliders */
    .slider.round {
        border-radius: 34px;
    }

        .slider.round:before {
            border-radius: 50%;
        }
</style>