@model WFJ.Models.UserDashboardViewModel

<div>
    <div class="row">
        <div class="col-12 col-md-12 col-lg-12 col-xl-6 mt-3">
            <div class="card">
                <div class="card-header justify-content-between align-items-center">
                    <h6 class="card-title">Follow Up Account</h6>
                </div>
                <div class="card-body table-responsive p-0">
                    <table class="table font-w-600 mb-0">
                        <thead>
                            <tr>
                                <th>Client Name</th>
                                <th>Customer Name</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var account in Model.FollowUpAccounts)
                            {
                                <tr class="zoom">
                                    <td>@account.ClientName</td>
                                    <td>@account.CustomerName</td>
                                    <td>@account.Status</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-12 col-xl-6">
            <div class="row">
                <div class="col-12 col-sm-6 mt-3">
                    <div class="card bg-primary">
                        <div class="card-body">
                            <div class="d-flex px-0 px-lg-2 py-2 align-self-center">
                                <i class="icon-basket icons card-liner-icon mt-2 text-white"></i>
                                <div class="card-liner-content">
                                    <h2 class="card-liner-title text-white">2,390</h2>
                                    <h6 class="card-liner-subtitle text-white">
                                        Today's Orders
                                    </h6>
                                </div>
                            </div>
                            <div id="apex_primary_chart"></div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 mt-3">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex px-0 px-lg-2 py-2 align-self-center">
                                <i class="icon-user icons card-liner-icon mt-2"></i>
                                <div class="card-liner-content">
                                    <h2 class="card-liner-title">9,390</h2>
                                    <h6 class="card-liner-subtitle">
                                        Today's Visitors
                                    </h6>
                                </div>
                            </div>
                            <span class="bg-primary card-liner-absolute-icon text-white card-liner-small-tip">+4.8%</span>
                            <div id="apex_today_visitors"></div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 mt-3">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex px-0 px-lg-2 py-2 align-self-center">
                                <i class="icon-bag icons card-liner-icon mt-2"></i>
                                <div class="card-liner-content">
                                    <h2 class="card-liner-title">$4,390</h2>
                                    <h6 class="card-liner-subtitle">Today's Sale</h6>
                                </div>
                            </div>
                            <div id="apex_today_sale"></div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 mt-3">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex px-0 px-lg-2 py-2 align-self-center">
                                <span class="card-liner-icon mt-1">$</span>
                                <div class="card-liner-content">
                                    <h2 class="card-liner-title">$4,390</h2>
                                    <h6 class="card-liner-subtitle">Total Profit</h6>
                                </div>
                            </div>
                            <div id="apex_today_profit"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-md-12 col-lg-12 col-xl-6 mt-3">
            <div class="card">
                <div class="card-header justify-content-between align-items-center">
                    <h6 class="card-title">Action Required</h6>
                </div>
                <div class="card-body table-responsive p-0">
                    <table class="table font-w-600 mb-0">
                        <thead>
                            <tr>
                                <th>Attorney Name</th>
                                <th>Client Name</th>
                                <th>Customer Name</th>
                                <th>Status</th>
                                <th>Compliance Duration</th>
                                <th>last Note Date</th>
                                <th>last Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var request in Model.ActionRequireds)
                            {
                                <tr class="zoom">
                                    <td>@request.AttorneyName</td>
                                    <td>@request.ClientName</td>
                                    <td>@request.CustomerName</td>
                                    <td>@request.Status</td>
                                    <td>@request.ComplianceDuration</td>
                                    <td>@request.LastNoteDate</td>
                                    <td>@request.LastNote</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-12 col-lg-12 col-xl-6 mt-3">
            <div class="card">
                <div class="card-header justify-content-between align-items-center">
                    <h6 class="card-title">Recently Opened Account</h6>
                </div>
                <div class="card-body table-responsive p-0">
                    <table class="table font-w-600 mb-0">
                        <thead>
                            <tr>
                                <th>Client Name</th>
                                <th>Customer Name</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                if (Model.RecentlyOpenedAccounts.Any())
                                {
                                    foreach (var account in Model.RecentlyOpenedAccounts)
                                    {
                                        <tr class="zoom">
                                            <td>@account.ClientName</td>
                                            <td>@account.CustomerName</td>
                                            <td>@account.Status</td>
                                        </tr>
                                    }
                                }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-md-12 col-lg-12 col-xl-12 mt-3">
            <div class="card">
                <div class="card-header justify-content-between align-items-center">
                    <h6 class="card-title">Recent Payment/Remittance</h6>
                </div>
                <div class="card-body table-responsive p-0">
                    <table class="table font-w-600 mb-0">
                        <thead>
                            <tr>
                                <th>Approve Payment</th>
                                <th>Client Name</th>
                                <th>Customer Name</th>
                                <th>Form Name</th>
                                <th>Status</th>
                                <th>Payment Date</th>
                                <th>Payment Amount</th>
                                <th>WFJ Fees</th>
                                <th>Payment Type</th>
                                <th>Remit/Invoice Date</th>
                                <th>Check/Invoice Number</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var request in Model.ApprovedPayements)
                            {
                                <tr class="zoom">
                                    <td><input type="checkbox" onclick="approvePayment('@request.PaymentId')" /></td>
                                    <td>@request.ClientName</td>
                                    <td>@request.CustomerName</td>
                                    <td>@request.FormName</td>
                                    <td>@request.Status</td>
                                    <td>@request.PaymentDate</td>
                                    <td>@request.PaymentAmount</td>
                                    <td>@request.WFJFees</td>
                                    <td>@request.PaymentType</td>
                                    <td>@request.InvoicDate</td>
                                    <td>@request.InvoiceNumber</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="row row-eq-height">
        <div class="col-12 col-md-12 mt-3">
            <div class="card">
                <div class="card-body d-md-flex text-center">
                    <ul class="d-md-flex m-0 pl-0 list-unstyled">
                        <li class="pill cl-personal py-1 px-2 mr-md-2 text-center my-1">
                            Personal
                        </li>

                        <li class="pill cl-professional py-1 px-2 mr-md-2 text-center my-1">
                            Professional
                        </li>
                        <li class="pill cl-work py-1 px-2 mr-md-2 text-center my-1">
                            Work
                        </li>

                        <li class="pill cl-home py-1 px-2 mr-md-2 text-center my-1">
                            Home
                        </li>
                        <li class="pill cl-office py-1 px-2 text-center my-1">
                            Office
                        </li>
                    </ul>
                    <a href="#"
                       class="btn btn-outline-success font-w-600 my-auto text-nowrap ml-auto add-event"
                       data-toggle="modal"
                       data-target="#addevent"><i class="icon-calendar"></i> Add Event</a>

                    <!-- Modal -->
                    <div id="addevent" class="modal fade" role="dialog">
                        <div class="modal-dialog text-left">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title" id="model-header">
                                        Add Event
                                    </h4>
                                </div>
                                <div class="modal-body">
                                    <form class="">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="start-date" class="">Event Title:</label>
                                                    <div class="d-flex event-title">
                                                        <input id="title"
                                                               type="text"
                                                               placeholder="Enter Title"
                                                               class="form-control"
                                                               name="title" />
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-6 col-sm-6 col-12">
                                                <div class="form-group start-date">
                                                    <label for="start-date" class="">From:</label>
                                                    <div class="d-flex">
                                                        <input id="start-date"
                                                               placeholder="Start Date"
                                                               class="form-control"
                                                               type="text" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6 col-12">
                                                <div class="form-group end-date">
                                                    <label for="end-date" class="">To:</label>
                                                    <div class="d-flex">
                                                        <input id="end-date"
                                                               placeholder="End Date"
                                                               type="text"
                                                               class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="taskdescription" class="">Event Description:</label>
                                                    <div class="d-flex event-description">
                                                        <textarea id="taskdescription"
                                                                  placeholder="Enter Description"
                                                                  rows="3"
                                                                  class="form-control"
                                                                  name="taskdescription"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="inputColor" class="">Color:</label>

                                                    <input type="color"
                                                           class="border-0 m-2"
                                                           id="inputColor"
                                                           value="#a7f4ec" />
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button id="discard"
                                            class="btn btn-outline-primary"
                                            data-dismiss="modal">
                                        Discard
                                    </button>
                                    <button id="add-event"
                                            class="btn btn-primary eventbutton">
                                        Add Event
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        @*<div class="col-12 col-md-12 mt-3">
            <div class="card h-100">
                <div class="card-body h-100">
                    <div id="calendar" class="h-100"></div>
                </div>
            </div>
        </div>*@
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {


    });

    function approvePayment(paymentId) {
        $.ajax({
            data: { paymentId: paymentId},
            traditional: true,
            url: '/Dashboard/UpdatePaymentStatus',
            type: 'post',
            dataType: 'json',
            success: function (resp) {
                if (resp.success === true) {
                    $.notify("Payments sent to selected users.", "success");
                }
                else {
                    $.notify("There was an error", "danger");
                }
            }
        });
    }
</script>