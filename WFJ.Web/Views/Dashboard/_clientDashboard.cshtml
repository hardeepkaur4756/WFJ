@model WFJ.Models.ClientDashboardViewModel


<div class="row">
    <div class="col-12 align-self-center">
        <div class="sub-header mt-3 py-3 align-self-center d-sm-flex w-100 rounded">
            <div class="w-sm-100 mr-auto">
                <h4 class="mb-0">
                    Welcome Test Admin to the WFJ Client Extranet
                </h4>
                <p>
                    Click on the menu above to view Documents, Files and Manage
                    Your Account.
                </p>
            </div>
            <ol class="breadcrumb bg-transparent align-self-center m-0 p-0">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item active">Dashboard</li>
            </ol>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12 col-lg-12 mt-3">
        <div class="row">
            <div class="col-12 col-md-12 col-lg-12 col-xl-6 mt-3">
                <div class="card">
                    <div class="card-content">
                        <div class="card-body">
                            <div class="height-235">
                                <canvas id="chartjs-other-pie"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-12 col-xl-6">
                <div class="row">
                    <div class="col-12 col-sm-6 mt-3">
                        <div class="card bg-primary">
                            <div class="card-body">
                                <div class="d-flex px-0 px-lg-2 py-2 align-self-center">
                                    <i class="icon-basket icons card-liner-icon mt-2 text-white"></i>
                                    <div class="card-liner-content">
                                        <h2 class="card-liner-title text-white">2,390</h2>
                                        <h6 class="card-liner-subtitle text-white">
                                            Today's Orders
                                        </h6>
                                    </div>
                                </div>
                                @*<div id="apex_primary_chart"></div>apex_primary_chart*@
                                <canvas id="placement-data-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 mt-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex px-0 px-lg-2 py-2 align-self-center">
                                    <i class="icon-user icons card-liner-icon mt-2"></i>
                                    <div class="card-liner-content">
                                        <h2 class="card-liner-title">9,390</h2>
                                        <h6 class="card-liner-subtitle">
                                            Today's Visitors
                                        </h6>
                                    </div>
                                </div>
                                <span class="bg-primary card-liner-absolute-icon text-white card-liner-small-tip">+4.8%</span>
                                <canvas id="dollars-placed-chart"></canvas>
                                @*<div id="apex_today_visitors"></div>*@
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 mt-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex px-0 px-lg-2 py-2 align-self-center">
                                    <i class="icon-bag icons card-liner-icon mt-2"></i>
                                    <div class="card-liner-content">
                                        <h2 class="card-liner-title">$4,390</h2>
                                        <h6 class="card-liner-subtitle">Today's Sale</h6>
                                    </div>
                                </div>
                                <canvas id="placement-collected-chart"></canvas>
                                @*<div id="apex_today_sale"></div>*@
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 mt-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex px-0 px-lg-2 py-2 align-self-center">
                                    <span class="card-liner-icon mt-1">$</span>
                                    <div class="card-liner-content">
                                        <h2 class="card-liner-title">$4,390</h2>
                                        <h6 class="card-liner-subtitle">Total Profit</h6>
                                    </div>
                                </div>
                                <canvas id="dollars-collected-chart"></canvas>
                                @*<div id="apex_today_profit"></div>*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 col-md-12 col-lg-12 col-xl-6 mt-3">
        <div class="card">
            <div class="card-header justify-content-between align-items-center">
                <h6 class="card-title">
                    Top 20 Accounts (Recent View?)
                </h6>
            </div>
            <div class="card-body table-responsive p-0">
                <table class="table font-w-600 mb-0" id="final-demand-required">
                    <thead>
                        <tr>
                            <th>Customer Name</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>

                        @foreach (var request in Model.RecentAccountView)
                        {
                            <tr class="zoom">
                                <td>@request.CustomerName</td>
                                <td>@request.Status</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-12 col-lg-12 col-xl-6 mt-3">
        <div class="card">
            <div class="card-header justify-content-between align-items-center">
                <h6 class="card-title">Visits by Countries</h6>
            </div>
            <div class="card-body table-responsive p-0">
                <table class="table font-w-600 mb-0">
                    <thead>
                        <tr>
                            <th>Country</th>
                            <th>Visits</th>
                            <th>Sessions</th>
                            <th>Page View</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="zoom">
                            <td>France</td>
                            <td class="text-success">
                                2,51,520 <i class="ion ion-arrow-graph-up-right"></i>
                            </td>
                            <td class="text-danger">
                                3,23,55,479
                                <i class="ion ion-arrow-graph-down-right"></i>
                            </td>
                            <td class="text-info">23,27,346</td>
                        </tr>
                        <tr class="zoom">
                            <td>United States</td>
                            <td class="text-success">
                                1,40,000 <i class="ion ion-arrow-graph-up-right"></i>
                            </td>
                            <td class="text-danger">
                                3,23,55,479
                                <i class="ion ion-arrow-graph-down-right"></i>
                            </td>
                            <td class="text-info">23,27,346</td>
                        </tr>
                        <tr class="zoom">
                            <td>China</td>
                            <td class="text-success">
                                2,70,000 <i class="ion ion-arrow-graph-up-right"></i>
                            </td>
                            <td class="text-danger">
                                3,23,55,479
                                <i class="ion ion-arrow-graph-down-right"></i>
                            </td>
                            <td class="text-info">23,27,346</td>
                        </tr>
                        <tr class="zoom">
                            <td>Spain</td>
                            <td class="text-success">
                                7,60,000 <i class="ion ion-arrow-graph-up-right"></i>
                            </td>
                            <td class="text-danger">
                                3,23,55,479
                                <i class="ion ion-arrow-graph-down-right"></i>
                            </td>
                            <td class="text-info">23,27,346</td>
                        </tr>
                        <tr class="zoom">
                            <td>Italy</td>
                            <td class="text-success">
                                6,70,000 <i class="ion ion-arrow-graph-up-right"></i>
                            </td>
                            <td class="text-danger">
                                3,23,55,479
                                <i class="ion ion-arrow-graph-down-right"></i>
                            </td>
                            <td class="text-info">23,27,346</td>
                        </tr>
                        <tr class="zoom">
                            <td>United Kingdom</td>
                            <td class="text-success">
                                8,40,000 <i class="ion ion-arrow-graph-up-right"></i>
                            </td>
                            <td class="text-danger">
                                3,23,55,479
                                <i class="ion ion-arrow-graph-down-right"></i>
                            </td>
                            <td class="text-info">23,27,346</td>
                        </tr>
                        <tr class="zoom">
                            <td>Malaysia</td>
                            <td class="text-success">
                                4,90,000 <i class="ion ion-arrow-graph-up-right"></i>
                            </td>
                            <td class="text-danger">
                                3,23,55,479
                                <i class="ion ion-arrow-graph-down-right"></i>
                            </td>
                            <td class="text-info">23,27,346</td>
                        </tr>
                        <tr class="zoom">
                            <td>India</td>
                            <td class="text-success">
                                12,51,520 <i class="ion ion-arrow-graph-up-right"></i>
                            </td>
                            <td class="text-danger">
                                3,23,55,479
                                <i class="ion ion-arrow-graph-down-right"></i>
                            </td>
                            <td class="text-info">23,27,346</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="row row-eq-height">
    <div class="col-12 col-md-12 mt-3">
        <div class="card">
            <div class="card-body d-md-flex text-center">
                <ul class="d-md-flex m-0 pl-0 list-unstyled">
                    <li class="pill cl-personal py-1 px-2 mr-md-2 text-center my-1">
                        Personal
                    </li>

                    <li class="pill cl-professional py-1 px-2 mr-md-2 text-center my-1">
                        Professional
                    </li>
                    <li class="pill cl-work py-1 px-2 mr-md-2 text-center my-1">
                        Work
                    </li>

                    <li class="pill cl-home py-1 px-2 mr-md-2 text-center my-1">
                        Home
                    </li>
                    <li class="pill cl-office py-1 px-2 text-center my-1">
                        Office
                    </li>
                </ul>
                <a href="#"
                   class="btn btn-outline-success font-w-600 my-auto text-nowrap ml-auto add-event"
                   data-toggle="modal"
                   data-target="#addevent"><i class="icon-calendar"></i> Add Event</a>

                <!-- Modal -->
                <div id="addevent" class="modal fade" role="dialog">
                    <div class="modal-dialog text-left">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title" id="model-header">
                                    Add Event
                                </h4>
                            </div>
                            <div class="modal-body">
                                <form class="">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label for="start-date" class="">Event Title:</label>
                                                <div class="d-flex event-title">
                                                    <input id="title"
                                                           type="text"
                                                           placeholder="Enter Title"
                                                           class="form-control"
                                                           name="title" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-6 col-sm-6 col-12">
                                            <div class="form-group start-date">
                                                <label for="start-date" class="">From:</label>
                                                <div class="d-flex">
                                                    <input id="start-date"
                                                           placeholder="Start Date"
                                                           class="form-control"
                                                           type="text" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-sm-6 col-12">
                                            <div class="form-group end-date">
                                                <label for="end-date" class="">To:</label>
                                                <div class="d-flex">
                                                    <input id="end-date"
                                                           placeholder="End Date"
                                                           type="text"
                                                           class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label for="taskdescription" class="">Event Description:</label>
                                                <div class="d-flex event-description">
                                                    <textarea id="taskdescription"
                                                              placeholder="Enter Description"
                                                              rows="3"
                                                              class="form-control"
                                                              name="taskdescription"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label for="inputColor" class="">Color:</label>

                                                <input type="color"
                                                       class="border-0 m-2"
                                                       id="inputColor"
                                                       value="#a7f4ec" />
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button id="discard"
                                        class="btn btn-outline-primary"
                                        data-dismiss="modal">
                                    Discard
                                </button>
                                <button id="add-event"
                                        class="btn btn-primary eventbutton">
                                    Add Event
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @*<div class="col-12 col-md-12 mt-3">
            <div class="card h-100">
                <div class="card-body h-100">
                    <div id="calendar" class="h-100"></div>
                </div>
            </div>
        </div>*@
</div>
<canvas id="linechart"></canvas>
<script  type="text/javascript" src="~/vendors/jquery/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js"></script>
<script type="text/javascript">
    var myLineChart;
    $(document).ready(function () {
        console.log("111");
        BindLineChart();
    });
     function BindLineChart() {
        if (myLineChart) {
            myLineChart.destroy();
        }
        $.ajax({
            type: "POST",
            url: "/Dashboard/GetPlacementsData",
            //"headers": {
            //    "XSRF-TOKEN": document.querySelector('[name="__RequestVerificationToken"]').value
            //},
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                var aData = response.ChartBaseModelPreviousYear;
                var data = [];
                var label = [];
                var dataPrevious = [];
                console.log(aData);
                $.each(aData, function (inx, val) {
                    var obj = {};
                    if (val.Value == null) {
                        data.push(0);
                    } else {
                        data.push(val.Value);
                    }
                    label.push(val.Name);
                });

                $.each(response.ChartBaseModelCurrentYear, function (inx, val) {
                    dataPrevious.push(val.Value);
                });

                var lineData = {
                    datasets: [{
                        data: data,
                        borderColor: "#3e95cd",
                        label: "Number of Sales",
                        fill: false,
                    },
                        {
                            data: dataPrevious,
                            borderColor: "#3e95cd",
                            label: "Number of Sales",
                            fill: false,
                        }
                    ],
                    labels: label
                };

                var context = document.getElementById("placement-data-chart").getContext("2d");
                myLineChart = new Chart(context, {
                    type: 'line',
                    data: lineData,
                    options: {
                        title: {
                            display: true,
                            text: 'Sales Over Time '// + selectionLabel(response.label)
                        }
                    }
                });
              //  HideLoader();
            }
        });

         $.ajax({
             type: "POST",
             url: "/Dashboard/GetDollarsPlacedData",
             //"headers": {
             //    "XSRF-TOKEN": document.querySelector('[name="__RequestVerificationToken"]').value
             //},
             contentType: "application/json; charset=utf-8",
             dataType: "json",
             success: function (response) {
                 var aData = response.ChartBaseModelPreviousYear;
                 var data = [];
                 var label = [];
                 var dataPrevious = [];
                 console.log(aData);
                 $.each(aData, function (inx, val) {
                     var obj = {};
                     if (val.Value == null) {
                         data.push(0);
                     } else {
                         data.push(val.Value);
                     }
                     label.push(val.Name);
                 });

                 $.each(response.ChartBaseModelCurrentYear, function (inx, val) {
                     dataPrevious.push(val.Value);
                 });

                 var lineData = {
                     datasets: [{
                         data: data,
                         borderColor: "#3e95cd",
                         label: "Number of Sales",
                         fill: false,
                     },
                     {
                         data: dataPrevious,
                         borderColor: "#3e95cd",
                         label: "Number of Sales",
                         fill: false,
                     }
                     ],
                     labels: label
                 };

                 var context = document.getElementById("dollars-placed-chart").getContext("2d");
                 myLineChart = new Chart(context, {
                     type: 'line',
                     data: lineData,
                     options: {
                         title: {
                             display: true,
                             text: 'Sales Over Time '// + selectionLabel(response.label)
                         }
                     }
                 });
                 //  HideLoader();
             }
         });

         $.ajax({
             type: "POST",
             url: "/Dashboard/GetPlacementCollectedData",
             //"headers": {
             //    "XSRF-TOKEN": document.querySelector('[name="__RequestVerificationToken"]').value
             //},
             contentType: "application/json; charset=utf-8",
             dataType: "json",
             success: function (response) {
                 var aData = response.ChartBaseModelPreviousYear;
                 var data = [];
                 var label = [];
                 var dataPrevious = [];
                 console.log(aData);
                 $.each(aData, function (inx, val) {
                     var obj = {};
                     if (val.Value == null) {
                         data.push(0);
                     } else {
                         data.push(val.Value);
                     }
                     label.push(val.Name);
                 });

                 $.each(response.ChartBaseModelCurrentYear, function (inx, val) {
                     dataPrevious.push(val.Value);
                 });

                 var lineData = {
                     datasets: [{
                         data: data,
                         borderColor: "#3e95cd",
                         label: "Number of Sales",
                         fill: false,
                     },
                     {
                         data: dataPrevious,
                         borderColor: "#3e95cd",
                         label: "Number of Sales",
                         fill: false,
                     }
                     ],
                     labels: label
                 };

                 var context = document.getElementById("placement-collected-chart").getContext("2d");
                 myLineChart = new Chart(context, {
                     type: 'line',
                     data: lineData,
                     options: {
                         title: {
                             display: true,
                             text: 'Sales Over Time '// + selectionLabel(response.label)
                         }
                     }
                 });
                 //  HideLoader();
             }
         });

         $.ajax({
             type: "POST",
             url: "/Dashboard/GetDollarsCollectedData",
             //"headers": {
             //    "XSRF-TOKEN": document.querySelector('[name="__RequestVerificationToken"]').value
             //},
             contentType: "application/json; charset=utf-8",
             dataType: "json",
             success: function (response) {
                 var aData = response.ChartBaseModelPreviousYear;
                 var data = [];
                 var label = [];
                 var dataPrevious = [];
                 console.log(aData);
                 $.each(aData, function (inx, val) {
                     var obj = {};
                     if (val.Value == null) {
                         data.push(0);
                     } else {
                         data.push(val.Value);
                     }
                     label.push(val.Name);
                 });

                 $.each(response.ChartBaseModelCurrentYear, function (inx, val) {
                     dataPrevious.push(val.Value);
                 });

                 var lineData = {
                     datasets: [{
                         data: data,
                         borderColor: "#3e95cd",
                         label: "Number of Sales",
                         fill: false,
                     },
                     {
                         data: dataPrevious,
                         borderColor: "#3e95cd",
                         label: "Number of Sales",
                         fill: false,
                     }
                     ],
                     labels: label
                 };

                 var context = document.getElementById("dollars-collected-chart").getContext("2d");
                 myLineChart = new Chart(context, {
                     type: 'line',
                     data: lineData,
                     options: {
                         title: {
                             display: true,
                             text: 'Sales Over Time '// + selectionLabel(response.label)
                         }
                     }
                 });
                 //  HideLoader();
             }
         });
    }
</script>